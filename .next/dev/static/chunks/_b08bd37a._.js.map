{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Avatar as AvatarPrimitive } from \"@base-ui/react/avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Avatar({\n  className,\n  size = \"default\",\n  ...props\n}: AvatarPrimitive.Root.Props & {\n  size?: \"default\" | \"sm\" | \"lg\"\n}) {\n  return (\n    <AvatarPrimitive.Root\n      data-slot=\"avatar\"\n      data-size={size}\n      className={cn(\n        \"size-8 rounded-full after:rounded-full data-[size=lg]:size-10 data-[size=sm]:size-6 after:border-border group/avatar relative flex shrink-0 select-none after:absolute after:inset-0 after:border after:mix-blend-darken dark:after:mix-blend-lighten\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarImage({ className, ...props }: AvatarPrimitive.Image.Props) {\n  return (\n    <AvatarPrimitive.Image\n      data-slot=\"avatar-image\"\n      className={cn(\n        \"rounded-full aspect-square size-full object-cover\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarFallback({\n  className,\n  ...props\n}: AvatarPrimitive.Fallback.Props) {\n  return (\n    <AvatarPrimitive.Fallback\n      data-slot=\"avatar-fallback\"\n      className={cn(\n        \"bg-muted text-muted-foreground rounded-full flex size-full items-center justify-center text-sm group-data-[size=sm]/avatar:text-xs\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarBadge({ className, ...props }: React.ComponentProps<\"span\">) {\n  return (\n    <span\n      data-slot=\"avatar-badge\"\n      className={cn(\n        \"bg-primary text-primary-foreground ring-background absolute right-0 bottom-0 z-10 inline-flex items-center justify-center rounded-full bg-blend-color ring-2 select-none\",\n        \"group-data-[size=sm]/avatar:size-2 group-data-[size=sm]/avatar:[&>svg]:hidden\",\n        \"group-data-[size=default]/avatar:size-2.5 group-data-[size=default]/avatar:[&>svg]:size-2\",\n        \"group-data-[size=lg]/avatar:size-3 group-data-[size=lg]/avatar:[&>svg]:size-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"avatar-group\"\n      className={cn(\n        \"*:data-[slot=avatar]:ring-background group/avatar-group flex -space-x-2 *:data-[slot=avatar]:ring-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction AvatarGroupCount({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"avatar-group-count\"\n      className={cn(\"bg-muted text-muted-foreground size-8 rounded-full text-xs group-has-data-[size=lg]/avatar-group:size-10 group-has-data-[size=sm]/avatar-group:size-6 [&>svg]:size-4 group-has-data-[size=lg]/avatar-group:[&>svg]:size-5 group-has-data-[size=sm]/avatar-group:[&>svg]:size-3 ring-background relative flex shrink-0 items-center justify-center ring-2\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Avatar,\n  AvatarImage,\n  AvatarFallback,\n  AvatarGroup,\n  AvatarGroupCount,\n  AvatarBadge,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,OAAO,EACd,SAAS,EACT,OAAO,SAAS,EAChB,GAAG,OAGJ;IACC,qBACE,6LAAC,uNAAe,CAAC,IAAI;QACnB,aAAU;QACV,aAAW;QACX,WAAW,IAAA,qHAAE,EACX,yPACA;QAED,GAAG,KAAK;;;;;;AAGf;KAlBS;AAoBT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC,uNAAe,CAAC,KAAK;QACpB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,qDACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,eAAe,EACtB,SAAS,EACT,GAAG,OAC4B;IAC/B,qBACE,6LAAC,uNAAe,CAAC,QAAQ;QACvB,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,sIACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAqC;IACxE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,4KACA,iFACA,6FACA,iFACA;QAED,GAAG,KAAK;;;;;;AAGf;MAdS;AAgBT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,uGACA;QAED,GAAG,KAAK;;;;;;AAGf;MAXS;AAaT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OACyB;IAC5B,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,4VAA4V;QACzW,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 131, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n    className,\n    ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n    return (\n        <div\n            className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n            {...props}\n        />\n    )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;;AAAA;;;AAEA,SAAS,SAAS,EACd,SAAS,EACT,GAAG,OACgC;IACnC,qBACI,6LAAC;QACG,WAAW,IAAA,qHAAE,EAAC,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGrB;KAVS"}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/components/ui/button.tsx"],"sourcesContent":["\"use client\"\n\nimport { Button as ButtonPrimitive } from \"@base-ui/react/button\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:aria-invalid:border-destructive/50 rounded-none border border-transparent bg-clip-padding text-xs font-medium focus-visible:ring-1 aria-invalid:ring-1 [&_svg:not([class*='size-'])]:size-4 inline-flex items-center justify-center whitespace-nowrap transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none shrink-0 [&_svg]:shrink-0 outline-none group/button select-none\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground [a]:hover:bg-primary/80\",\n        outline: \"border-border bg-background hover:bg-muted hover:text-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50 aria-expanded:bg-muted aria-expanded:text-foreground\",\n        secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80 aria-expanded:bg-secondary aria-expanded:text-secondary-foreground\",\n        ghost: \"hover:bg-muted hover:text-foreground dark:hover:bg-muted/50 aria-expanded:bg-muted aria-expanded:text-foreground\",\n        destructive: \"bg-destructive/10 hover:bg-destructive/20 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/20 text-destructive focus-visible:border-destructive/40 dark:hover:bg-destructive/30\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-8 gap-1.5 px-2.5 has-data-[icon=inline-end]:pr-2 has-data-[icon=inline-start]:pl-2\",\n        xs: \"h-6 gap-1 rounded-none px-2 text-xs has-data-[icon=inline-end]:pr-1.5 has-data-[icon=inline-start]:pl-1.5 [&_svg:not([class*='size-'])]:size-3\",\n        sm: \"h-7 gap-1 rounded-none px-2.5 has-data-[icon=inline-end]:pr-1.5 has-data-[icon=inline-start]:pl-1.5 [&_svg:not([class*='size-'])]:size-3.5\",\n        lg: \"h-9 gap-1.5 px-2.5 has-data-[icon=inline-end]:pr-3 has-data-[icon=inline-start]:pl-3\",\n        icon: \"size-8\",\n        \"icon-xs\": \"size-6 rounded-none [&_svg:not([class*='size-'])]:size-3\",\n        \"icon-sm\": \"size-7 rounded-none\",\n        \"icon-lg\": \"size-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction Button({\n  className,\n  variant = \"default\",\n  size = \"default\",\n  ...props\n}: ButtonPrimitive.Props & VariantProps<typeof buttonVariants>) {\n  return (\n    <ButtonPrimitive\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,iBAAiB,IAAA,0KAAG,EACxB,sjBACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,SAAS;YACT,WAAW;YACX,OAAO;YACP,aAAa;YACb,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,SAAS,EAChB,GAAG,OACyD;IAC5D,qBACE,6LAAC,6KAAe;QACd,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf;KAbS"}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { Dialog as SheetPrimitive } from \"@base-ui/react/dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { HugeiconsIcon } from \"@hugeicons/react\"\nimport { Cancel01Icon } from \"@hugeicons/core-free-icons\"\n\nfunction Sheet({ ...props }: SheetPrimitive.Root.Props) {\n  return <SheetPrimitive.Root data-slot=\"sheet\" {...props} />\n}\n\nfunction SheetTrigger({ ...props }: SheetPrimitive.Trigger.Props) {\n  return <SheetPrimitive.Trigger data-slot=\"sheet-trigger\" {...props} />\n}\n\nfunction SheetClose({ ...props }: SheetPrimitive.Close.Props) {\n  return <SheetPrimitive.Close data-slot=\"sheet-close\" {...props} />\n}\n\nfunction SheetPortal({ ...props }: SheetPrimitive.Portal.Props) {\n  return <SheetPrimitive.Portal data-slot=\"sheet-portal\" {...props} />\n}\n\nfunction SheetOverlay({ className, ...props }: SheetPrimitive.Backdrop.Props) {\n  return (\n    <SheetPrimitive.Backdrop\n      data-slot=\"sheet-overlay\"\n      className={cn(\"data-open:animate-in data-closed:animate-out data-closed:fade-out-0 data-open:fade-in-0 bg-black/10 text-xs/relaxed duration-100 data-ending-style:opacity-0 data-starting-style:opacity-0 supports-backdrop-filter:backdrop-blur-xs fixed inset-0 z-50\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetContent({\n  className,\n  children,\n  side = \"right\",\n  showCloseButton = true,\n  ...props\n}: SheetPrimitive.Popup.Props & {\n  side?: \"top\" | \"right\" | \"bottom\" | \"left\"\n  showCloseButton?: boolean\n}) {\n  return (\n    <SheetPortal>\n      <SheetOverlay />\n      <SheetPrimitive.Popup\n        data-slot=\"sheet-content\"\n        data-side={side}\n        className={cn(\"bg-background data-open:animate-in data-closed:animate-out data-[side=right]:data-closed:slide-out-to-right-10 data-[side=right]:data-open:slide-in-from-right-10 data-[side=left]:data-closed:slide-out-to-left-10 data-[side=left]:data-open:slide-in-from-left-10 data-[side=top]:data-closed:slide-out-to-top-10 data-[side=top]:data-open:slide-in-from-top-10 data-closed:fade-out-0 data-open:fade-in-0 data-[side=bottom]:data-closed:slide-out-to-bottom-10 data-[side=bottom]:data-open:slide-in-from-bottom-10 fixed z-50 flex flex-col bg-clip-padding text-xs/relaxed shadow-lg transition duration-200 ease-in-out data-[side=bottom]:inset-x-0 data-[side=bottom]:bottom-0 data-[side=bottom]:h-auto data-[side=bottom]:border-t data-[side=left]:inset-y-0 data-[side=left]:left-0 data-[side=left]:h-full data-[side=left]:w-3/4 data-[side=left]:border-r data-[side=right]:inset-y-0 data-[side=right]:right-0 data-[side=right]:h-full data-[side=right]:w-3/4 data-[side=right]:border-l data-[side=top]:inset-x-0 data-[side=top]:top-0 data-[side=top]:h-auto data-[side=top]:border-b data-[side=left]:sm:max-w-sm data-[side=right]:sm:max-w-sm\", className)}\n        {...props}\n      >\n        {children}\n        {showCloseButton && (\n          <SheetPrimitive.Close\n            data-slot=\"sheet-close\"\n            render={\n              <Button\n                variant=\"ghost\"\n                className=\"absolute top-3 right-3\"\n                size=\"icon-sm\"\n              />\n            }\n          >\n            <HugeiconsIcon icon={Cancel01Icon} strokeWidth={2} />\n            <span className=\"sr-only\">Close</span>\n          </SheetPrimitive.Close>\n        )}\n      </SheetPrimitive.Popup>\n    </SheetPortal>\n  )\n}\n\nfunction SheetHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sheet-header\"\n      className={cn(\"gap-0.5 p-4 flex flex-col\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sheet-footer\"\n      className={cn(\"gap-2 p-4 mt-auto flex flex-col\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetTitle({ className, ...props }: SheetPrimitive.Title.Props) {\n  return (\n    <SheetPrimitive.Title\n      data-slot=\"sheet-title\"\n      className={cn(\"text-foreground text-sm font-medium\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SheetDescription({\n  className,\n  ...props\n}: SheetPrimitive.Description.Props) {\n  return (\n    <SheetPrimitive.Description\n      data-slot=\"sheet-description\"\n      className={cn(\"text-muted-foreground text-xs/relaxed\", className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sheet,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;AAGA;AAEA;AACA;AACA;AAAA;AACA;AARA;;;;;;;AAUA,SAAS,MAAM,EAAE,GAAG,OAAkC;IACpD,qBAAO,6LAAC,uNAAc,CAAC,IAAI;QAAC,aAAU;QAAS,GAAG,KAAK;;;;;;AACzD;KAFS;AAIT,SAAS,aAAa,EAAE,GAAG,OAAqC;IAC9D,qBAAO,6LAAC,uNAAc,CAAC,OAAO;QAAC,aAAU;QAAiB,GAAG,KAAK;;;;;;AACpE;MAFS;AAIT,SAAS,WAAW,EAAE,GAAG,OAAmC;IAC1D,qBAAO,6LAAC,uNAAc,CAAC,KAAK;QAAC,aAAU;QAAe,GAAG,KAAK;;;;;;AAChE;MAFS;AAIT,SAAS,YAAY,EAAE,GAAG,OAAoC;IAC5D,qBAAO,6LAAC,uNAAc,CAAC,MAAM;QAAC,aAAU;QAAgB,GAAG,KAAK;;;;;;AAClE;MAFS;AAIT,SAAS,aAAa,EAAE,SAAS,EAAE,GAAG,OAAsC;IAC1E,qBACE,6LAAC,uNAAc,CAAC,QAAQ;QACtB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,2PAA2P;QACxQ,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,aAAa,EACpB,SAAS,EACT,QAAQ,EACR,OAAO,OAAO,EACd,kBAAkB,IAAI,EACtB,GAAG,OAIJ;IACC,qBACE,6LAAC;;0BACC,6LAAC;;;;;0BACD,6LAAC,uNAAc,CAAC,KAAK;gBACnB,aAAU;gBACV,aAAW;gBACX,WAAW,IAAA,qHAAE,EAAC,4mCAA4mC;gBACznC,GAAG,KAAK;;oBAER;oBACA,iCACC,6LAAC,uNAAc,CAAC,KAAK;wBACnB,aAAU;wBACV,sBACE,6LAAC,wIAAM;4BACL,SAAQ;4BACR,WAAU;4BACV,MAAK;;;;;;;0CAIT,6LAAC,wLAAa;gCAAC,MAAM,iPAAY;gCAAE,aAAa;;;;;;0CAChD,6LAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAMtC;MAtCS;AAwCT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,6BAA6B;QAC1C,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,mCAAmC;QAChD,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAmC;IACrE,qBACE,6LAAC,uNAAc,CAAC,KAAK;QACnB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,uCAAuC;QACpD,GAAG,KAAK;;;;;;AAGf;MARS;AAUT,SAAS,iBAAiB,EACxB,SAAS,EACT,GAAG,OAC8B;IACjC,qBACE,6LAAC,uNAAc,CAAC,WAAW;QACzB,aAAU;QACV,WAAW,IAAA,qHAAE,EAAC,yCAAyC;QACtD,GAAG,KAAK;;;;;;AAGf;MAXS"}},
    {"offset": {"line": 445, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/components/ui/badge.tsx"],"sourcesContent":["import { mergeProps } from \"@base-ui/react/merge-props\"\nimport { useRender } from \"@base-ui/react/use-render\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"h-5 gap-1 rounded-none border border-transparent px-2 py-0.5 text-xs font-medium transition-all has-data-[icon=inline-end]:pr-1.5 has-data-[icon=inline-start]:pl-1.5 [&>svg]:size-3! inline-flex items-center justify-center w-fit whitespace-nowrap shrink-0 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-colors overflow-hidden group/badge\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground [a]:hover:bg-primary/80\",\n        secondary: \"bg-secondary text-secondary-foreground [a]:hover:bg-secondary/80\",\n        destructive: \"bg-destructive/10 [a]:hover:bg-destructive/20 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 text-destructive dark:bg-destructive/20\",\n        outline: \"border-border text-foreground [a]:hover:bg-muted [a]:hover:text-muted-foreground\",\n        ghost: \"hover:bg-muted hover:text-muted-foreground dark:hover:bg-muted/50\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nfunction Badge({\n  className,\n  variant = \"default\",\n  render,\n  ...props\n}: useRender.ComponentProps<\"span\"> & VariantProps<typeof badgeVariants>) {\n  return useRender({\n    defaultTagName: \"span\",\n    props: mergeProps<\"span\">(\n      {\n        className: cn(badgeVariants({ className, variant })),\n      },\n      props\n    ),\n    render,\n    state: {\n      slot: \"badge\",\n      variant,\n    },\n  })\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,gBAAgB,IAAA,0KAAG,EACvB,igBACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,WAAW;YACX,aAAa;YACb,SAAS;YACT,OAAO;YACP,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,SAAS,MAAM,EACb,SAAS,EACT,UAAU,SAAS,EACnB,MAAM,EACN,GAAG,OACmE;;IACtE,OAAO,IAAA,0LAAS,EAAC;QACf,gBAAgB;QAChB,OAAO,IAAA,6LAAU,EACf;YACE,WAAW,IAAA,qHAAE,EAAC,cAAc;gBAAE;gBAAW;YAAQ;QACnD,GACA;QAEF;QACA,OAAO;YACL,MAAM;YACN;QACF;IACF;AACF;GApBS;;QAMA,0LAAS;;;KANT"}},
    {"offset": {"line": 508, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction Label({ className, ...props }: React.ComponentProps<\"label\">) {\n  return (\n    <label\n      data-slot=\"label\"\n      className={cn(\n        \"gap-2 text-xs leading-none group-data-[disabled=true]:opacity-50 peer-disabled:opacity-50 flex items-center select-none group-data-[disabled=true]:pointer-events-none peer-disabled:cursor-not-allowed\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAIA;AAJA;;;AAMA,SAAS,MAAM,EAAE,SAAS,EAAE,GAAG,OAAsC;IACnE,qBACE,6LAAC;QACC,aAAU;QACV,WAAW,IAAA,qHAAE,EACX,2MACA;QAED,GAAG,KAAK;;;;;;AAGf;KAXS"}},
    {"offset": {"line": 539, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/components/notifications/NotificationSettings.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useMutation, useQuery } from \"convex/react\";\nimport { api } from \"@/convex/_generated/api\";\nimport { Button } from \"@/components/ui/button\";\nimport { Label } from \"@/components/ui/label\";\nimport {\n    Sheet,\n    SheetTrigger,\n    SheetContent,\n    SheetHeader,\n    SheetTitle,\n    SheetDescription,\n} from \"@/components/ui/sheet\";\nimport { Settings, Moon, Bell, BellOff, Volume2, VolumeX } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\nconst HOURS = Array.from({ length: 24 }, (_, i) => ({\n    value: i,\n    label: i === 0 ? \"12 AM\" : i < 12 ? `${i} AM` : i === 12 ? \"12 PM\" : `${i - 12} PM`,\n}));\n\nexport function NotificationSettings() {\n    const [open, setOpen] = useState(false);\n    const prefs = useQuery(api.notifications.getPreferences);\n    const updatePrefs = useMutation(api.notifications.updatePreferences);\n\n    const quietEnabled = prefs?.quietHoursEnabled ?? false;\n    const quietStart = prefs?.quietHoursStart ?? 22;\n    const quietEnd = prefs?.quietHoursEnd ?? 7;\n    const webEnabled = prefs?.webNotificationsEnabled ?? false;\n\n    return (\n        <Sheet open={open} onOpenChange={setOpen}>\n            <SheetTrigger\n                render={\n                    <Button variant=\"ghost\" size=\"icon-sm\" className=\"text-muted-foreground\">\n                        <Settings className=\"w-3.5 h-3.5\" />\n                    </Button>\n                }\n            />\n            <SheetContent side=\"right\" className=\"w-85 sm:max-w-85\">\n                <SheetHeader>\n                    <SheetTitle>Notification Settings</SheetTitle>\n                    <SheetDescription>\n                        Control how and when you receive notifications.\n                    </SheetDescription>\n                </SheetHeader>\n\n                <div className=\"mt-6 space-y-6\">\n                    {/* Web Notifications Toggle */}\n                    <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3\">\n                            <div className={cn(\n                                \"w-8 h-8 rounded-lg flex items-center justify-center\",\n                                webEnabled ? \"bg-primary/10\" : \"bg-muted\"\n                            )}>\n                                {webEnabled ? (\n                                    <Bell className=\"w-4 h-4 text-primary\" />\n                                ) : (\n                                    <BellOff className=\"w-4 h-4 text-muted-foreground\" />\n                                )}\n                            </div>\n                            <div>\n                                <p className=\"text-sm font-medium\">Browser Notifications</p>\n                                <p className=\"text-xs text-muted-foreground\">For governance & mentions</p>\n                            </div>\n                        </div>\n                        <button\n                            onClick={async () => {\n                                if (!webEnabled && Notification.permission === \"default\") {\n                                    const perm = await Notification.requestPermission();\n                                    if (perm !== \"granted\") return;\n                                }\n                                await updatePrefs({ webNotificationsEnabled: !webEnabled });\n                            }}\n                            className={cn(\n                                \"relative inline-flex h-5 w-9 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors\",\n                                webEnabled ? \"bg-primary\" : \"bg-muted\"\n                            )}\n                        >\n                            <span className={cn(\n                                \"pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow-lg transition-transform\",\n                                webEnabled ? \"translate-x-4\" : \"translate-x-0\"\n                            )} />\n                        </button>\n                    </div>\n\n                    {/* Quiet Hours */}\n                    <div className=\"border border-border rounded-lg p-4\">\n                        <div className=\"flex items-center justify-between mb-3\">\n                            <div className=\"flex items-center gap-3\">\n                                <div className={cn(\n                                    \"w-8 h-8 rounded-lg flex items-center justify-center\",\n                                    quietEnabled ? \"bg-indigo-100 dark:bg-indigo-900/30\" : \"bg-muted\"\n                                )}>\n                                    <Moon className={cn(\"w-4 h-4\", quietEnabled ? \"text-indigo-600\" : \"text-muted-foreground\")} />\n                                </div>\n                                <div>\n                                    <p className=\"text-sm font-medium\">Quiet Hours</p>\n                                    <p className=\"text-xs text-muted-foreground\">Pause critical alerts</p>\n                                </div>\n                            </div>\n                            <button\n                                onClick={() => updatePrefs({ quietHoursEnabled: !quietEnabled })}\n                                className={cn(\n                                    \"relative inline-flex h-5 w-9 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors\",\n                                    quietEnabled ? \"bg-indigo-600\" : \"bg-muted\"\n                                )}\n                            >\n                                <span className={cn(\n                                    \"pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow-lg transition-transform\",\n                                    quietEnabled ? \"translate-x-4\" : \"translate-x-0\"\n                                )} />\n                            </button>\n                        </div>\n\n                        {quietEnabled && (\n                            <div className=\"space-y-3 pt-3 border-t border-border\">\n                                <div className=\"grid grid-cols-2 gap-3\">\n                                    <div>\n                                        <Label className=\"text-xs text-muted-foreground mb-1 block\">From</Label>\n                                        <select\n                                            value={quietStart}\n                                            onChange={(e) => updatePrefs({ quietHoursStart: parseInt(e.target.value) })}\n                                            className=\"w-full h-8 px-2 text-xs rounded-md border border-border bg-background\"\n                                        >\n                                            {HOURS.map(({ value, label }) => (\n                                                <option key={value} value={value}>{label}</option>\n                                            ))}\n                                        </select>\n                                    </div>\n                                    <div>\n                                        <Label className=\"text-xs text-muted-foreground mb-1 block\">To</Label>\n                                        <select\n                                            value={quietEnd}\n                                            onChange={(e) => updatePrefs({ quietHoursEnd: parseInt(e.target.value) })}\n                                            className=\"w-full h-8 px-2 text-xs rounded-md border border-border bg-background\"\n                                        >\n                                            {HOURS.map(({ value, label }) => (\n                                                <option key={value} value={value}>{label}</option>\n                                            ))}\n                                        </select>\n                                    </div>\n                                </div>\n                                <p className=\"text-[10px] text-muted-foreground/70\">\n                                    During quiet hours, critical notifications are downgraded to in-app only. No browser popups.\n                                </p>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Info */}\n                    <div className=\"rounded-lg bg-muted/50 p-3\">\n                        <p className=\"text-[11px] text-muted-foreground leading-relaxed\">\n                            <span className=\"font-semibold\">Notification layers:</span>\n                        </p>\n                        <div className=\"mt-2 space-y-1.5\">\n                            <div className=\"flex items-center gap-2 text-[11px]\">\n                                <span className=\"w-2 h-2 rounded-full bg-red-500\" />\n                                <span className=\"text-muted-foreground\"><span className=\"font-medium text-foreground\">Critical</span> â€” Governance, mentions, payments</span>\n                            </div>\n                            <div className=\"flex items-center gap-2 text-[11px]\">\n                                <span className=\"w-2 h-2 rounded-full bg-yellow-500\" />\n                                <span className=\"text-muted-foreground\"><span className=\"font-medium text-foreground\">Important</span> â€” Messages, polls, fund updates</span>\n                            </div>\n                            <div className=\"flex items-center gap-2 text-[11px]\">\n                                <span className=\"w-2 h-2 rounded-full bg-gray-400\" />\n                                <span className=\"text-muted-foreground\"><span className=\"font-medium text-foreground\">Activity</span> â€” Members, events, photos</span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </SheetContent>\n        </Sheet>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1070, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/components/notifications/NotificationBell.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback, useEffect, useRef } from \"react\";\nimport { useQuery, useMutation } from \"convex/react\";\nimport { api } from \"@/convex/_generated/api\";\nimport { Id } from \"@/convex/_generated/dataModel\";\nimport {\n    Sheet,\n    SheetTrigger,\n    SheetContent,\n    SheetHeader,\n    SheetTitle,\n} from \"@/components/ui/sheet\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n    Bell,\n    Check,\n    CheckCheck,\n    Shield,\n    MessageSquare,\n    Vote,\n    CalendarDays,\n    Wallet,\n    Users,\n    Image,\n    BarChart3,\n    X,\n    Settings,\n    Filter,\n    BellOff,\n} from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\nimport { useRouter } from \"next/navigation\";\nimport { NotificationSettings } from \"./NotificationSettings\";\n\n// â”€â”€â”€ Icon Config â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nconst NOTIFICATION_ICONS: Record<string, { icon: typeof Bell; color: string; bg: string }> = {\n    governance: { icon: Shield, color: \"text-amber-600\", bg: \"bg-amber-100 dark:bg-amber-900/30\" },\n    message: { icon: MessageSquare, color: \"text-blue-600\", bg: \"bg-blue-100 dark:bg-blue-900/30\" },\n    vote: { icon: Vote, color: \"text-purple-600\", bg: \"bg-purple-100 dark:bg-purple-900/30\" },\n    event: { icon: CalendarDays, color: \"text-emerald-600\", bg: \"bg-emerald-100 dark:bg-emerald-900/30\" },\n    payment: { icon: Wallet, color: \"text-green-600\", bg: \"bg-green-100 dark:bg-green-900/30\" },\n    member: { icon: Users, color: \"text-sky-600\", bg: \"bg-sky-100 dark:bg-sky-900/30\" },\n    photo: { icon: Image, color: \"text-pink-600\", bg: \"bg-pink-100 dark:bg-pink-900/30\" },\n    poll: { icon: BarChart3, color: \"text-indigo-600\", bg: \"bg-indigo-100 dark:bg-indigo-900/30\" },\n};\n\nconst LAYER_INDICATOR: Record<string, { dot: string; label: string }> = {\n    critical: { dot: \"bg-red-500\", label: \"Critical\" },\n    important: { dot: \"bg-yellow-500\", label: \"Important\" },\n    passive: { dot: \"bg-gray-400\", label: \"Activity\" },\n};\n\n// â”€â”€â”€ Notification Bell Button â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nexport function NotificationBell() {\n    const [open, setOpen] = useState(false);\n    const unreadCount = useQuery(api.notifications.getUnreadCount) ?? 0;\n\n    // â”€â”€ Realtime web notification watcher (always mounted) â”€â”€\n    const criticalNotifs = useQuery(api.notifications.getRecentCritical) ?? [];\n    const prevCriticalIdsRef = useRef<Set<string>>(new Set());\n    const isInitialRef = useRef(true);\n\n    useEffect(() => {\n        if (!criticalNotifs.length && isInitialRef.current) {\n            isInitialRef.current = false;\n            return;\n        }\n\n        const currentIds = new Set(criticalNotifs.map((n) => n._id));\n\n        if (isInitialRef.current) {\n            // First load â€” just record existing IDs, don't fire\n            prevCriticalIdsRef.current = currentIds;\n            isInitialRef.current = false;\n            return;\n        }\n\n        // Find truly new critical notifications\n        const newOnes = criticalNotifs.filter(\n            (n) => !prevCriticalIdsRef.current.has(n._id)\n        );\n\n        for (const n of newOnes) {\n            triggerWebNotification(n.title, n.message, n.data);\n        }\n\n        prevCriticalIdsRef.current = currentIds;\n    }, [criticalNotifs]);\n\n    return (\n        <Sheet open={open} onOpenChange={setOpen}>\n            <SheetTrigger\n                render={\n                    <Button\n                        variant=\"ghost\"\n                        size=\"icon\"\n                        className=\"w-8 h-8 text-muted-foreground relative\"\n                    >\n                        <Bell className=\"w-4 h-4\" />\n                        {unreadCount > 0 && (\n                            <span className=\"absolute top-0 right-0 flex h-3.5 min-w-3.5 items-center justify-center rounded-full bg-red-500 px-0.5 text-[9px] font-bold text-white ring-2 ring-background\">\n                                {unreadCount > 99 ? \"99+\" : unreadCount}\n                            </span>\n                        )}\n                        <span className=\"sr-only\">\n                            Notifications {unreadCount > 0 ? `(${unreadCount} unread)` : \"\"}\n                        </span>\n                    </Button>\n                }\n            />\n            <SheetContent side=\"right\" showCloseButton={false} className=\"p-0 w-full sm:w-110 sm:max-w-110 flex flex-col\">\n                <NotificationTray onClose={() => setOpen(false)} />\n            </SheetContent>\n        </Sheet>\n    );\n}\n\n// â”€â”€â”€ Notification Tray â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nfunction NotificationTray({ onClose }: { onClose: () => void }) {\n    const router = useRouter();\n    const notifications = useQuery(api.notifications.getNotifications, { limit: 50 }) ?? [];\n    const markAsRead = useMutation(api.notifications.markAsRead);\n    const markAllAsRead = useMutation(api.notifications.markAllAsRead);\n\n    const [filter, setFilter] = useState<\"all\" | \"critical\" | \"important\" | \"passive\">(\"all\");\n    const [groupFilter, setGroupFilter] = useState<string | null>(null);\n\n    const filtered = notifications.filter((n) => {\n        const layer = n.layer ?? \"passive\";\n        if (filter !== \"all\" && layer !== filter) return false;\n        if (groupFilter && n.groupId !== groupFilter) return false;\n        return true;\n    });\n\n    // Get unique groups for filter\n    const groups = Array.from(\n        new Map(\n            notifications\n                .filter((n) => n.groupId && n.groupName)\n                .map((n) => [n.groupId, n.groupName!])\n        )\n    );\n\n    const unreadCount = notifications.filter((n) => !n.isRead).length;\n\n    const handleClick = useCallback(\n        async (notification: (typeof notifications)[0]) => {\n            if (!notification.isRead) {\n                await markAsRead({ notificationId: notification._id as Id<\"notifications\"> });\n            }\n            // Navigate based on type\n            const data = notification.data as any;\n            if (data?.channelId && data?.groupId) {\n                router.push(`/community/${data.groupId}?channel=${data.channelId}${data.messageId ? `&message=${data.messageId}` : \"\"}`);\n            } else if (data?.groupId) {\n                router.push(`/community/${data.groupId}`);\n            } else if (data?.eventId) {\n                router.push(`/community/${data.groupId}?tab=events&event=${data.eventId}`);\n            }\n            onClose();\n        },\n        [markAsRead, router, onClose]\n    );\n\n    return (\n        <div className=\"flex flex-col h-full\">\n            {/* Header */}\n            <div className=\"px-4 py-3 border-b border-border bg-card/50\">\n                <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                        <Bell className=\"w-4 h-4 text-primary\" />\n                        <h2 className=\"text-sm font-semibold\">Notifications</h2>\n                        {unreadCount > 0 && (\n                            <Badge variant=\"destructive\" className=\"h-5 px-1.5 text-[10px] rounded-full\">\n                                {unreadCount}\n                            </Badge>\n                        )}\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                        <NotificationSettings />\n                        {unreadCount > 0 && (\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                className=\"text-xs h-7 text-muted-foreground hover:text-foreground\"\n                                onClick={() => markAllAsRead({})}\n                            >\n                                <CheckCheck className=\"w-3 h-3 mr-1\" />\n                                Mark all read\n                            </Button>\n                        )}\n                    </div>\n                </div>\n\n                {/* Layer Filters */}\n                <div className=\"flex gap-1 mt-2\">\n                    {([\"all\", \"critical\", \"important\", \"passive\"] as const).map((f) => (\n                        <button\n                            key={f}\n                            onClick={() => setFilter(f)}\n                            className={cn(\n                                \"px-2.5 py-1 rounded-md text-[11px] font-medium transition-colors\",\n                                filter === f\n                                    ? \"bg-primary/10 text-primary\"\n                                    : \"text-muted-foreground hover:bg-muted/50\"\n                            )}\n                        >\n                            {f === \"all\" ? \"All\" : f === \"critical\" ? \"ðŸ”´ Critical\" : f === \"important\" ? \"ðŸŸ¡ Updates\" : \"âšª Activity\"}\n                        </button>\n                    ))}\n                </div>\n\n                {/* Group Filter */}\n                {groups.length > 1 && (\n                    <div className=\"flex gap-1 mt-1.5 overflow-x-auto scrollbar-hide\">\n                        <button\n                            onClick={() => setGroupFilter(null)}\n                            className={cn(\n                                \"px-2 py-0.5 rounded text-[10px] font-medium whitespace-nowrap transition-colors\",\n                                !groupFilter ? \"bg-muted text-foreground\" : \"text-muted-foreground hover:text-foreground\"\n                            )}\n                        >\n                            All Groups\n                        </button>\n                        {groups.map(([id, name]) => (\n                            <button\n                                key={id as string}\n                                onClick={() => setGroupFilter(id as string)}\n                                className={cn(\n                                    \"px-2 py-0.5 rounded text-[10px] font-medium whitespace-nowrap transition-colors\",\n                                    groupFilter === id ? \"bg-muted text-foreground\" : \"text-muted-foreground hover:text-foreground\"\n                                )}\n                            >\n                                {name as string}\n                            </button>\n                        ))}\n                    </div>\n                )}\n            </div>\n\n            {/* Notification List */}\n            <div className=\"flex-1 overflow-y-auto\">\n                {filtered.length === 0 ? (\n                    <div className=\"flex flex-col items-center justify-center h-48 text-center\">\n                        <BellOff className=\"w-8 h-8 text-muted-foreground/50 mb-2\" />\n                        <p className=\"text-sm text-muted-foreground\">No notifications</p>\n                        <p className=\"text-xs text-muted-foreground/70 mt-0.5\">\n                            {filter !== \"all\" ? \"Try a different filter\" : \"You're all caught up!\"}\n                        </p>\n                    </div>\n                ) : (\n                    <div className=\"divide-y divide-border\">\n                        {filtered.map((notification) => (\n                            <NotificationItem\n                                key={notification._id}\n                                notification={notification}\n                                onClick={() => handleClick(notification)}\n                                onMarkRead={() =>\n                                    markAsRead({ notificationId: notification._id as Id<\"notifications\"> })\n                                }\n                            />\n                        ))}\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n\n// â”€â”€â”€ Single Notification Item â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nfunction NotificationItem({\n    notification,\n    onClick,\n    onMarkRead,\n}: {\n    notification: {\n        _id: string;\n        type: string;\n        layer?: string | null;\n        title?: string | null;\n        message: string;\n        icon?: string | null;\n        groupName?: string | null;\n        isRead: boolean;\n        createdAt: number;\n        data?: any;\n    };\n    onClick: () => void;\n    onMarkRead: () => void;\n}) {\n    const iconConfig = NOTIFICATION_ICONS[notification.icon ?? \"message\"] ?? NOTIFICATION_ICONS.message;\n    const layerConfig = LAYER_INDICATOR[notification.layer ?? \"passive\"] ?? LAYER_INDICATOR.passive;\n    const Icon = iconConfig.icon;\n    const displayTitle = notification.title ?? notification.type ?? \"Notification\";\n\n    return (\n        <div\n            role=\"button\"\n            tabIndex={0}\n            onClick={onClick}\n            onKeyDown={(e) => { if (e.key === \"Enter\" || e.key === \" \") { e.preventDefault(); onClick(); } }}\n            className={cn(\n                \"w-full flex items-start gap-3 px-4 py-3 text-left transition-colors hover:bg-muted/40 group cursor-pointer\",\n                !notification.isRead && \"bg-primary/5\"\n            )}\n        >\n            {/* Icon */}\n            <div className={cn(\"mt-0.5 w-8 h-8 rounded-lg flex items-center justify-center shrink-0\", iconConfig.bg)}>\n                <Icon className={cn(\"w-4 h-4\", iconConfig.color)} />\n            </div>\n\n            {/* Content */}\n            <div className=\"flex-1 min-w-0\">\n                <div className=\"flex items-center gap-1.5\">\n                    {!notification.isRead && (\n                        <span className={cn(\"w-1.5 h-1.5 rounded-full shrink-0\", layerConfig.dot)} />\n                    )}\n                    <span className={cn(\"text-xs font-semibold truncate\", !notification.isRead ? \"text-foreground\" : \"text-muted-foreground\")}>\n                        {displayTitle}\n                    </span>\n                </div>\n                <p className={cn(\"text-[11px] mt-0.5 line-clamp-2\", !notification.isRead ? \"text-foreground/80\" : \"text-muted-foreground\")}>\n                    {notification.message}\n                </p>\n                <div className=\"flex items-center gap-2 mt-1\">\n                    {notification.groupName && (\n                        <span className=\"text-[10px] text-muted-foreground/70 truncate max-w-30\">\n                            {notification.groupName}\n                        </span>\n                    )}\n                    <span className=\"text-[10px] text-muted-foreground/50\">\n                        {formatTimeAgo(notification.createdAt)}\n                    </span>\n                </div>\n            </div>\n\n            {/* Mark as read button */}\n            {!notification.isRead && (\n                <button\n                    onClick={(e) => {\n                        e.stopPropagation();\n                        onMarkRead();\n                    }}\n                    className=\"mt-1 opacity-0 group-hover:opacity-100 transition-opacity p-1 rounded hover:bg-muted\"\n                    title=\"Mark as read\"\n                >\n                    <Check className=\"w-3 h-3 text-muted-foreground\" />\n                </button>\n            )}\n        </div>\n    );\n}\n\n// â”€â”€â”€ Web Notification Helper â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nfunction triggerWebNotification(title: string, body: string, data?: any) {\n    if (typeof window === \"undefined\") return;\n    if (!(\"Notification\" in window)) return;\n    if (Notification.permission !== \"granted\") return;\n\n    // Don't fire if tab is focused\n    if (document.hasFocus()) return;\n\n    try {\n        const notif = new Notification(title, {\n            body,\n            icon: \"/icons/cityhub-192.png\",\n            badge: \"/icons/cityhub-badge.png\",\n            tag: data?.groupId ?? \"cityhub\",\n        } as NotificationOptions);\n\n        notif.onclick = () => {\n            window.focus();\n            notif.close();\n        };\n\n        // Auto-close after 5 seconds\n        setTimeout(() => notif.close(), 5000);\n    } catch {\n        // Silently fail if notification API is not available\n    }\n}\n\n// â”€â”€â”€ Time Formatter â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nfunction formatTimeAgo(timestamp: number): string {\n    const seconds = Math.floor((Date.now() - timestamp) / 1000);\n    if (seconds < 60) return \"just now\";\n    if (seconds < 3600) return `${Math.floor(seconds / 60)}m`;\n    if (seconds < 86400) return `${Math.floor(seconds / 3600)}h`;\n    if (seconds < 604800) return `${Math.floor(seconds / 86400)}d`;\n    return new Date(timestamp).toLocaleDateString();\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1703, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/components/layout/AppSidebar.tsx"],"sourcesContent":["\"use client\";\n\nimport { memo, useCallback } from \"react\";\nimport Link from \"next/link\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { cn } from \"@/lib/utils\";\nimport {\n    LayoutGrid,\n    Map,\n    MapPin,\n    Users,\n    User,\n    LogOut,\n    Building2,\n    Compass,\n    Search,\n    ChevronDown,\n    Shield,\n    Landmark,\n} from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { authClient } from \"@/lib/auth-client\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useQuery } from \"convex/react\";\nimport { api } from \"@/convex/_generated/api\";\nimport { NotificationBell } from \"@/components/notifications/NotificationBell\";\n\nconst CATEGORY_EMOJI: Record<string, string> = {\n    \"Neighborhood\": \"ðŸ˜ï¸\",\n    \"Environment\": \"ðŸŒ±\",\n    \"Education\": \"ðŸ“š\",\n    \"Arts & Culture\": \"ðŸŽ¨\",\n    \"Sports & Recreation\": \"âš½\",\n    \"Safety & Watch\": \"ðŸš¨\",\n    \"Local Business\": \"ðŸª\",\n    \"Tech & Innovation\": \"ðŸ’»\",\n    \"Health & Wellness\": \"ðŸ’ª\",\n    \"Other\": \"ðŸ“Œ\",\n};\n\nconst SidebarItem = memo(function SidebarItem({\n    href,\n    icon: Icon,\n    label,\n    isActive,\n    onClick,\n    badge,\n}: {\n    href: string;\n    icon: any;\n    label: string;\n    isActive: boolean;\n    onClick?: () => void;\n    badge?: number;\n}) {\n    return (\n        <Link\n            href={href}\n            onClick={onClick}\n            className={cn(\n                \"flex items-center gap-3 px-3 py-2 text-sm font-medium rounded-lg transition-all group\",\n                isActive\n                    ? \"bg-primary/15 text-primary border border-primary/20\"\n                    : \"text-muted-foreground hover:bg-muted/50 hover:text-foreground border border-transparent\"\n            )}\n        >\n            <Icon className={cn(\"w-4 h-4 shrink-0\", isActive ? \"text-primary\" : \"text-muted-foreground group-hover:text-foreground\")} />\n            <span className=\"truncate\">{label}</span>\n            {badge && badge > 0 ? (\n                <span className=\"ml-auto px-1.5 py-0.5 text-[10px] font-bold bg-destructive text-white rounded-full min-w-4.5 text-center\">\n                    {badge}\n                </span>\n            ) : null}\n        </Link>\n    );\n});\n\n/* â”€â”€ Sidebar skeleton shown while the single query loads â”€â”€ */\nfunction SidebarSkeleton() {\n    return (\n        <aside className=\"h-full bg-background/95 backdrop-blur-sm flex flex-col lg:fixed lg:left-0 lg:top-0 lg:z-40 lg:w-72 lg:h-screen border-r border-border\">\n            <div className=\"h-14 flex items-center justify-between px-5 border-b border-border bg-card/50\">\n                <div className=\"flex items-center gap-2.5\">\n                    <div className=\"w-7 h-7 rounded-lg bg-primary/15 flex items-center justify-center\">\n                        <Landmark className=\"w-4 h-4 text-primary\" />\n                    </div>\n                    <span className=\"font-bold text-sm text-foreground tracking-tight\">CityHub</span>\n                </div>\n                <Skeleton className=\"h-7 w-20 rounded-lg\" />\n            </div>\n            <div className=\"flex-1 overflow-y-auto px-3 pt-4 space-y-6\">\n                <div className=\"space-y-2\">\n                    <Skeleton className=\"h-3 w-28 rounded ml-2\" />\n                    {[1, 2, 3].map((i) => <Skeleton key={i} className=\"h-9 w-full rounded-lg\" />)}\n                </div>\n                <div className=\"space-y-2\">\n                    <Skeleton className=\"h-3 w-20 rounded ml-2\" />\n                    <Skeleton className=\"h-9 w-full rounded-lg\" />\n                    <Skeleton className=\"h-9 w-full rounded-lg\" />\n                </div>\n                <div className=\"space-y-2\">\n                    <Skeleton className=\"h-3 w-24 rounded ml-2\" />\n                    <Skeleton className=\"h-9 w-full rounded-lg\" />\n                    <Skeleton className=\"h-9 w-full rounded-lg\" />\n                </div>\n            </div>\n            <div className=\"p-3 border-t border-border bg-card/30\">\n                <div className=\"flex items-center gap-3 px-2 py-2\">\n                    <Skeleton className=\"w-8 h-8 rounded-full shrink-0\" />\n                    <div className=\"flex-1 space-y-1.5\">\n                        <Skeleton className=\"h-3.5 w-24 rounded\" />\n                        <Skeleton className=\"h-2.5 w-16 rounded\" />\n                    </div>\n                </div>\n            </div>\n        </aside>\n    );\n}\n\nexport function AppSidebar({ onNavigate }: { onNavigate?: () => void }) {\n    const pathname = usePathname();\n    const router = useRouter();\n    const { data: session } = authClient.useSession();\n\n    // â”€â”€ Single combined query (replaces getMyProfile + getMyGroups + getFileUrl) â”€â”€\n    const sidebarData = useQuery(api.users.getSidebarData, {});\n\n    const handleSignOut = useCallback(async () => {\n        await authClient.signOut({\n            fetchOptions: { onSuccess: () => router.push(\"/auth/login\") },\n        });\n    }, [router]);\n\n    // Show skeleton while the single query loads\n    if (sidebarData === undefined) return <SidebarSkeleton />;\n    if (sidebarData === null) return null;\n\n    const { profile, groups, avatarUrl, userName } = sidebarData;\n    const cityName = profile?.city?.name ?? \"City\";\n    const displayName = userName || session?.user?.name || \"User\";\n    const initials = displayName.split(\" \").map((n: string) => n[0]).join(\"\").toUpperCase().slice(0, 2) || \"U\";\n\n    return (\n        <aside className=\"h-full bg-background/95 backdrop-blur-sm flex flex-col lg:fixed lg:left-0 lg:top-0 lg:z-40 lg:w-72 lg:h-screen border-r border-border\">\n            {/* Civic Header */}\n            <div className=\"h-14 flex items-center justify-between px-3 border-b border-border bg-card/50\">\n                <div className=\"flex items-center gap-2 min-w-0\">\n                    <div className=\"w-7 h-7 rounded-lg bg-primary/15 flex items-center justify-center shrink-0\">\n                        <Landmark className=\"w-4 h-4 text-primary\" />\n                    </div>\n                    <span className=\"font-bold text-sm text-foreground tracking-tight\">\n                        CityHub\n                    </span>\n                </div>\n                <div className=\"flex items-center gap-0.5 shrink-0\">\n                    <div className=\"hidden lg:block\">\n                        <NotificationBell />\n                    </div>\n                </div>\n            </div>\n\n            {/* Scrollable Content */}\n            <div className=\"flex-1 overflow-y-auto\">\n                {/* My Communities */}\n                {groups.length > 0 && (\n                    <div className=\"px-3 pt-4 pb-2\">\n                        <div className=\"px-2 text-[10px] font-bold text-muted-foreground/70 uppercase tracking-[0.15em] mb-2 flex items-center gap-1.5\">\n                            <Shield className=\"w-3 h-3\" />\n                            My Communities\n                        </div>\n                        <div className=\"space-y-0.5\">\n                            {groups.map((group) => {\n                                const isActive = pathname === `/community/${group._id}`;\n                                const emoji = CATEGORY_EMOJI[group.category] || \"ðŸ“Œ\";\n                                return (\n                                    <Link\n                                        key={group._id}\n                                        href={`/community/${group._id}`}\n                                        onClick={onNavigate}\n                                        className={cn(\n                                            \"flex items-center gap-2.5 px-2.5 py-2 rounded-lg text-sm transition-all group\",\n                                            isActive\n                                                ? \"bg-primary/10 text-foreground\"\n                                                : \"text-muted-foreground hover:bg-muted/50 hover:text-foreground\"\n                                        )}\n                                    >\n                                        <span className=\"text-base shrink-0\">{emoji}</span>\n                                        <span className=\"truncate font-medium\">{group.name}</span>\n                                        {group.myRole === \"founder\" || group.myRole === \"manager\" ? (\n                                            <span className=\"ml-auto w-2 h-2 rounded-full bg-primary shrink-0\" title=\"Manager\" />\n                                        ) : null}\n                                    </Link>\n                                );\n                            })}\n                        </div>\n                    </div>\n                )}\n\n                {/* Discover Section */}\n                <div className=\"px-3 pt-4 pb-2\">\n                    <div className=\"px-2 text-[10px] font-bold text-muted-foreground/70 uppercase tracking-[0.15em] mb-2 flex items-center gap-1.5\">\n                        <Compass className=\"w-3 h-3\" />\n                        Discover\n                    </div>\n                    <div className=\"space-y-0.5\">\n                        <SidebarItem\n                            href=\"/community\"\n                            icon={Search}\n                            label=\"Browse All Groups\"\n                            isActive={pathname === \"/community\"}\n                            onClick={onNavigate}\n                        />\n                        <SidebarItem\n                            href=\"/map\"\n                            icon={Map}\n                            label=\"City Map\"\n                            isActive={pathname === \"/map\"}\n                            onClick={onNavigate}\n                        />\n                    </div>\n                </div>\n\n                {/* Civic Platform */}\n                <div className=\"px-3 pt-4 pb-2\">\n                    <div className=\"px-2 text-[10px] font-bold text-muted-foreground/70 uppercase tracking-[0.15em] mb-2 flex items-center gap-1.5\">\n                        <Building2 className=\"w-3 h-3\" />\n                        Civic Platform\n                    </div>\n                    <div className=\"space-y-0.5\">\n                        <SidebarItem\n                            href=\"/\"\n                            icon={LayoutGrid}\n                            label=\"Dashboard\"\n                            isActive={pathname === \"/\"}\n                            onClick={onNavigate}\n                        />\n                        <SidebarItem\n                            href=\"/profile\"\n                            icon={User}\n                            label=\"My Profile\"\n                            isActive={pathname === \"/profile\"}\n                            onClick={onNavigate}\n                        />\n                    </div>\n                </div>\n            </div>\n\n            {/* Footer - User Info */}\n            <div className=\"p-3 border-t border-border bg-card/30\">\n                {profile && (\n                    <div className=\"flex items-center gap-3 px-2 py-2 rounded-lg hover:bg-muted/30 transition-colors\">\n                        <Avatar className=\"w-8 h-8 ring-2 ring-primary/20\">\n                            {avatarUrl && <AvatarImage src={avatarUrl} />}\n                            <AvatarFallback className=\"text-xs bg-primary/15 text-primary font-bold\">\n                                {initials}\n                            </AvatarFallback>\n                        </Avatar>\n                        <div className=\"flex-1 min-w-0\">\n                            <p className=\"text-sm font-semibold text-foreground truncate\">\n                                {displayName}\n                            </p>\n                            <p className=\"text-[11px] text-muted-foreground truncate flex items-center gap-1\">\n                                <span className=\"w-1.5 h-1.5 rounded-full bg-emerald-400 inline-block\" />\n                                {cityName}\n                            </p>\n                        </div>\n                        <div className=\"flex items-center gap-1\">\n                            <button\n                                onClick={handleSignOut}\n                                className=\"w-7 h-7 rounded-md flex items-center justify-center text-muted-foreground hover:text-destructive hover:bg-destructive/10 transition-colors\"\n                                title=\"Sign Out\"\n                            >\n                                <LogOut className=\"w-3.5 h-3.5\" />\n                            </button>\n                        </div>\n                    </div>\n                )}\n            </div>\n        </aside>\n    );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2404, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/components/notifications/NotificationPermissionPrompt.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect, useCallback } from \"react\";\nimport { useMutation, useQuery } from \"convex/react\";\nimport { api } from \"@/convex/_generated/api\";\nimport { Button } from \"@/components/ui/button\";\nimport { Bell, X } from \"lucide-react\";\nimport { cn } from \"@/lib/utils\";\n\n/**\n * Smart notification permission prompt.\n * Only shows AFTER user has joined their first group (engagement signal).\n * Never shows on login/first load.\n */\nexport function NotificationPermissionPrompt() {\n    const [visible, setVisible] = useState(false);\n    const [dismissed, setDismissed] = useState(false);\n    const updatePrefs = useMutation(api.notifications.updatePreferences);\n    const savePush = useMutation(api.notifications.savePushSubscription);\n\n    useEffect(() => {\n        if (typeof window === \"undefined\") return;\n        if (!(\"Notification\" in window)) return;\n\n        // Already granted or denied\n        if (Notification.permission !== \"default\") return;\n\n        // Check if user already dismissed\n        const wasDismissed = localStorage.getItem(\"cityhub_notif_dismissed\");\n        if (wasDismissed) return;\n\n        // Show after a delay (user should be engaged already)\n        const timer = setTimeout(() => setVisible(true), 2000);\n        return () => clearTimeout(timer);\n    }, []);\n\n    const handleEnable = useCallback(async () => {\n        try {\n            const permission = await Notification.requestPermission();\n            if (permission === \"granted\") {\n                await updatePrefs({ webNotificationsEnabled: true });\n\n                // Register for Web Push if service worker available\n                if (\"serviceWorker\" in navigator) {\n                    const registration = await navigator.serviceWorker.ready;\n                    const pushManager = (registration as any).pushManager;\n                    if (!pushManager) return;\n                    const subscription = await pushManager.subscribe({\n                        userVisibleOnly: true,\n                        applicationServerKey: process.env.NEXT_PUBLIC_VAPID_PUBLIC_KEY,\n                    });\n\n                    const json = subscription.toJSON();\n                    if (json.endpoint && json.keys) {\n                        await savePush({\n                            endpoint: json.endpoint,\n                            p256dh: json.keys.p256dh ?? \"\",\n                            auth: json.keys.auth ?? \"\",\n                        });\n                    }\n                }\n            }\n        } catch (err) {\n            console.error(\"Failed to enable notifications:\", err);\n        }\n        setVisible(false);\n    }, [updatePrefs, savePush]);\n\n    const handleDismiss = useCallback(() => {\n        setVisible(false);\n        setDismissed(true);\n        localStorage.setItem(\"cityhub_notif_dismissed\", \"true\");\n    }, []);\n\n    if (!visible || dismissed) return null;\n\n    return (\n        <div className=\"fixed bottom-4 right-4 z-50 max-w-sm animate-in slide-in-from-bottom-4 fade-in duration-300\">\n            <div className=\"bg-card border border-border rounded-xl shadow-lg p-4\">\n                <div className=\"flex items-start gap-3\">\n                    <div className=\"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center shrink-0\">\n                        <Bell className=\"w-5 h-5 text-primary\" />\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                        <h3 className=\"text-sm font-semibold text-foreground\">\n                            Stay in the loop\n                        </h3>\n                        <p className=\"text-xs text-muted-foreground mt-0.5\">\n                            Get notified about governance decisions, mentions, and payments. We only send what matters.\n                        </p>\n                        <div className=\"flex gap-2 mt-3\">\n                            <Button\n                                size=\"sm\"\n                                className=\"h-7 text-xs\"\n                                onClick={handleEnable}\n                            >\n                                <Bell className=\"w-3 h-3 mr-1\" />\n                                Enable\n                            </Button>\n                            <Button\n                                variant=\"ghost\"\n                                size=\"sm\"\n                                className=\"h-7 text-xs text-muted-foreground\"\n                                onClick={handleDismiss}\n                            >\n                                Not now\n                            </Button>\n                        </div>\n                    </div>\n                    <button\n                        onClick={handleDismiss}\n                        className=\"p-1 rounded hover:bg-muted text-muted-foreground\"\n                    >\n                        <X className=\"w-3.5 h-3.5\" />\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;AAiD8C;;AA/C9C;AACA;AAAA;AACA;AACA;AACA;AAAA;;;AANA;;;;;;AAcO,SAAS;;IACZ,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,cAAc,IAAA,0KAAW,EAAC,qIAAG,CAAC,aAAa,CAAC,iBAAiB;IACnE,MAAM,WAAW,IAAA,0KAAW,EAAC,qIAAG,CAAC,aAAa,CAAC,oBAAoB;IAEnE,IAAA,0KAAS;kDAAC;YACN;;YACA,IAAI,CAAC,CAAC,kBAAkB,MAAM,GAAG;YAEjC,4BAA4B;YAC5B,IAAI,aAAa,UAAU,KAAK,WAAW;YAE3C,kCAAkC;YAClC,MAAM,eAAe,aAAa,OAAO,CAAC;YAC1C,IAAI,cAAc;YAElB,sDAAsD;YACtD,MAAM,QAAQ;gEAAW,IAAM,WAAW;+DAAO;YACjD;0DAAO,IAAM,aAAa;;QAC9B;iDAAG,EAAE;IAEL,MAAM,eAAe,IAAA,4KAAW;kEAAC;YAC7B,IAAI;gBACA,MAAM,aAAa,MAAM,aAAa,iBAAiB;gBACvD,IAAI,eAAe,WAAW;oBAC1B,MAAM,YAAY;wBAAE,yBAAyB;oBAAK;oBAElD,oDAAoD;oBACpD,IAAI,mBAAmB,WAAW;wBAC9B,MAAM,eAAe,MAAM,UAAU,aAAa,CAAC,KAAK;wBACxD,MAAM,cAAc,AAAC,aAAqB,WAAW;wBACrD,IAAI,CAAC,aAAa;wBAClB,MAAM,eAAe,MAAM,YAAY,SAAS,CAAC;4BAC7C,iBAAiB;4BACjB,sBAAsB,2KAAO,CAAC,GAAG,CAAC,4BAA4B;wBAClE;wBAEA,MAAM,OAAO,aAAa,MAAM;wBAChC,IAAI,KAAK,QAAQ,IAAI,KAAK,IAAI,EAAE;4BAC5B,MAAM,SAAS;gCACX,UAAU,KAAK,QAAQ;gCACvB,QAAQ,KAAK,IAAI,CAAC,MAAM,IAAI;gCAC5B,MAAM,KAAK,IAAI,CAAC,IAAI,IAAI;4BAC5B;wBACJ;oBACJ;gBACJ;YACJ,EAAE,OAAO,KAAK;gBACV,QAAQ,KAAK,CAAC,mCAAmC;YACrD;YACA,WAAW;QACf;iEAAG;QAAC;QAAa;KAAS;IAE1B,MAAM,gBAAgB,IAAA,4KAAW;mEAAC;YAC9B,WAAW;YACX,aAAa;YACb,aAAa,OAAO,CAAC,2BAA2B;QACpD;kEAAG,EAAE;IAEL,IAAI,CAAC,WAAW,WAAW,OAAO;IAElC,qBACI,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;sBACX,cAAA,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC,6MAAI;4BAAC,WAAU;;;;;;;;;;;kCAEpB,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAG,WAAU;0CAAwC;;;;;;0CAGtD,6LAAC;gCAAE,WAAU;0CAAuC;;;;;;0CAGpD,6LAAC;gCAAI,WAAU;;kDACX,6LAAC,wIAAM;wCACH,MAAK;wCACL,WAAU;wCACV,SAAS;;0DAET,6LAAC,6MAAI;gDAAC,WAAU;;;;;;4CAAiB;;;;;;;kDAGrC,6LAAC,wIAAM;wCACH,SAAQ;wCACR,MAAK;wCACL,WAAU;wCACV,SAAS;kDACZ;;;;;;;;;;;;;;;;;;kCAKT,6LAAC;wBACG,SAAS;wBACT,WAAU;kCAEV,cAAA,6LAAC,oMAAC;4BAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMrC;GAzGgB;;QAGQ,0KAAW;QACd,0KAAW;;;KAJhB"}},
    {"offset": {"line": 2627, "column": 0}, "map": {"version":3,"sources":["file:///home/udit/hack/City-Hub/components/layout/AppShell.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useCallback } from \"react\";\nimport { AppSidebar } from \"./AppSidebar\";\nimport { Menu, Search, Users, Landmark } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n    Sheet,\n    SheetContent,\n    SheetTrigger,\n} from \"@/components/ui/sheet\";\nimport { NotificationBell } from \"@/components/notifications/NotificationBell\";\nimport { NotificationPermissionPrompt } from \"@/components/notifications/NotificationPermissionPrompt\";\n\nexport function AppShell({ children }: { children: React.ReactNode }) {\n    const [mobileMenuOpen, setMobileMenuOpen] = useState(false);\n    const closeMobileMenu = useCallback(() => setMobileMenuOpen(false), []);\n\n    return (\n        <div className=\"flex flex-col h-dvh lg:block lg:h-auto lg:min-h-screen bg-background font-sans text-foreground\">\n            {/* Desktop Sidebar */}\n            <div className=\"hidden lg:block\">\n                <AppSidebar />\n            </div>\n\n            {/* Mobile Header */}\n            <div className=\"lg:hidden shrink-0 z-50 h-14 border-b border-border bg-card/95 backdrop-blur supports-backdrop-blur:bg-card/60\">\n                <div className=\"flex items-center justify-between h-full px-4\">\n                    <div className=\"flex items-center gap-2.5\">\n                        <div className=\"w-7 h-7 bg-primary/15 flex items-center justify-center\">\n                            <Landmark className=\"w-4 h-4 text-primary\" />\n                        </div>\n                        <span className=\"font-bold text-sm tracking-tight\">CityHub</span>\n                    </div>\n                    <div className=\"flex items-center gap-1\">\n                        <Button variant=\"ghost\" size=\"icon\" className=\"w-9 h-9 text-muted-foreground\">\n                            <Search className=\"w-4 h-4\" />\n                        </Button>\n                        <NotificationBell />\n                        <Sheet open={mobileMenuOpen} onOpenChange={setMobileMenuOpen}>\n                            <SheetTrigger\n                                render={\n                                    <Button variant=\"ghost\" size=\"icon\" className=\"w-9 h-9 text-muted-foreground\">\n                                        <Menu className=\"w-5 h-5\" />\n                                        <span className=\"sr-only\">Toggle menu</span>\n                                    </Button>\n                                }\n                            />\n                            <SheetContent side=\"right\" className=\"p-0 w-72\">\n                                <AppSidebar onNavigate={closeMobileMenu} />\n                            </SheetContent>\n                        </Sheet>\n                    </div>\n                </div>\n            </div>\n\n            {/* Main Content */}\n            <main className=\"lg:pl-72 flex-1 min-h-0 overflow-y-auto lg:overflow-visible lg:min-h-screen\">\n                {children}\n            </main>\n\n            {/* Notification Permission Prompt (smart timing) */}\n            <NotificationPermissionPrompt />\n        </div>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAKA;AACA;;;AAZA;;;;;;;;AAcO,SAAS,SAAS,EAAE,QAAQ,EAAiC;;IAChE,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IACrD,MAAM,kBAAkB,IAAA,4KAAW;iDAAC,IAAM,kBAAkB;gDAAQ,EAAE;IAEtE,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC,oJAAU;;;;;;;;;;0BAIf,6LAAC;gBAAI,WAAU;0BACX,cAAA,6LAAC;oBAAI,WAAU;;sCACX,6LAAC;4BAAI,WAAU;;8CACX,6LAAC;oCAAI,WAAU;8CACX,cAAA,6LAAC,yNAAQ;wCAAC,WAAU;;;;;;;;;;;8CAExB,6LAAC;oCAAK,WAAU;8CAAmC;;;;;;;;;;;;sCAEvD,6LAAC;4BAAI,WAAU;;8CACX,6LAAC,wIAAM;oCAAC,SAAQ;oCAAQ,MAAK;oCAAO,WAAU;8CAC1C,cAAA,6LAAC,mNAAM;wCAAC,WAAU;;;;;;;;;;;8CAEtB,6LAAC,uKAAgB;;;;;8CACjB,6LAAC,sIAAK;oCAAC,MAAM;oCAAgB,cAAc;;sDACvC,6LAAC,6IAAY;4CACT,sBACI,6LAAC,wIAAM;gDAAC,SAAQ;gDAAQ,MAAK;gDAAO,WAAU;;kEAC1C,6LAAC,6MAAI;wDAAC,WAAU;;;;;;kEAChB,6LAAC;wDAAK,WAAU;kEAAU;;;;;;;;;;;;;;;;;sDAItC,6LAAC,6IAAY;4CAAC,MAAK;4CAAQ,WAAU;sDACjC,cAAA,6LAAC,oJAAU;gDAAC,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAQ5C,6LAAC;gBAAK,WAAU;0BACX;;;;;;0BAIL,6LAAC,+LAA4B;;;;;;;;;;;AAGzC;GAnDgB;KAAA"}}]
}